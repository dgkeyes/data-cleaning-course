<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Restructuring Data</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <link href="libs/tachyons/tachyons.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Restructuring Data

---





layout: true
  
&lt;div class="dk-footer"&gt;
&lt;span&gt;
&lt;a href="https://rfortherestofus.com/" target="_blank"&gt;R for the Rest of Us
&lt;/a&gt;
&lt;/span&gt;
&lt;/div&gt; 

---











class: center, middle, dk-section-title
background-image:url("images/casey-horner-KtlTvi8leYQ-unsplash.jpg")
background-size: cover
# Toolbox Refresher

---

## Tools for preparing, transforming, and restructuring data

.fl.w-40[
.tc[
ðŸ“¦ .large.b.rrured[`dplyr`]  
ðŸ“¦ .large.b.rrured[`tidyr`]  
]]

.fl.w-60[
.large[Part of the .b.rrured[`tidyverse`]]  

Flexible, but developed around built-in features that support a particular way of doing things  

]    

--

- Hard to use incorrectly by accident   
- Less code to achieve a goal  
- Shared grammar and input/output data structures  

---

## Pipes

To perform multiple operations in sequence:

--

- Nested code  

--

- Intermediate objects  

--

- Pipes  

---

## Nested code


```r
grades &lt;- c(7,8,8,10,6,9,5,9,8)

round(mean(grades), digits = 2)
```

```
## [1] 7.78
```

--

## Intermediate objects


```r
mn_grades &lt;- mean(grades)

rd_mn_grades &lt;- round(mn_grades, digits = 2)

rd_mn_grades
```

```
## [1] 7.78
```

---

## Pipes

For structuring sequential operations left-to-right:

.fl.w-third[
.bt.bb[
Left Hand Side  
(.avenir[LHS])
&lt;br&gt;&amp;nbsp;
]]


.fl.w-third[
.bt.bb[
`pipe operator`  
.b.orange[`%&gt;%`] from  ðŸ“¦ .b.rrured[`magrittr`]
]]

.fl.w-third[
.bt.bb[
Right Hand Side  
(.avenir[RHS])
&lt;br&gt;&amp;nbsp;
]]

---

## Pipes

- Take an **object** on the .avenir[Left Hand Side] of the pipe and insert it into a **function** as an argument on the .avenir[Right Hand Side] 

--

- By default, .avenir[LHS] is placed as the **first** argument in the call 

--

- Packages in the `tidyverse`  load .b.orange[`%&gt;%`] automatically

---

## Pipes 

--

- Minimize the need for intermediate objects and nested code  

--

- Make code readable  

--

- Easy to add or remove steps at any point in the sequence of operations

--

&gt; Insert with `ctrl + shift + M`

--


```r
library(magrittr)
grades %&gt;% 
  mean %&gt;% 
  round(digits=2)
```

```
## [1] 7.78
```

---

## Useful ðŸ“¦ .b.rrured[`dplyr`] functions

- Individual functions for the most common operations

--

- Each function does one only thing, but does it well  

--

- Intuitive, user-friendly functions for common data manipulation tasks:

--

  - Subset columns
   
--

  - Subset rows
   
--

  - Create or modify columns  
 
---



.panelset[
.panel[.panel-name[beers]
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#vpjculfpff .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #f4f4f9;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vpjculfpff .gt_heading {
  background-color: #f4f4f9;
  text-align: center;
  border-bottom-color: #f4f4f9;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vpjculfpff .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #f4f4f9;
  border-bottom-width: 0;
}

#vpjculfpff .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #f4f4f9;
  border-top-width: 0;
}

#vpjculfpff .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vpjculfpff .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vpjculfpff .gt_col_heading {
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vpjculfpff .gt_column_spanner_outer {
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vpjculfpff .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vpjculfpff .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vpjculfpff .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vpjculfpff .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#vpjculfpff .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vpjculfpff .gt_from_md > :first-child {
  margin-top: 0;
}

#vpjculfpff .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vpjculfpff .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vpjculfpff .gt_stub {
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#vpjculfpff .gt_summary_row {
  color: #333333;
  background-color: #f4f4f9;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vpjculfpff .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#vpjculfpff .gt_grand_summary_row {
  color: #333333;
  background-color: #f4f4f9;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vpjculfpff .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vpjculfpff .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vpjculfpff .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vpjculfpff .gt_footnotes {
  color: #333333;
  background-color: #f4f4f9;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vpjculfpff .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#vpjculfpff .gt_sourcenotes {
  color: #333333;
  background-color: #f4f4f9;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vpjculfpff .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#vpjculfpff .gt_left {
  text-align: left;
}

#vpjculfpff .gt_center {
  text-align: center;
}

#vpjculfpff .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vpjculfpff .gt_font_normal {
  font-weight: normal;
}

#vpjculfpff .gt_font_bold {
  font-weight: bold;
}

#vpjculfpff .gt_font_italic {
  font-style: italic;
}

#vpjculfpff .gt_super {
  font-size: 65%;
}

#vpjculfpff .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="vpjculfpff" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">name</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">style</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">alc_by_volume</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">price_range</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">country</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">star_rating</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">County</td>
      <td class="gt_row gt_left">Lager</td>
      <td class="gt_row gt_right">4.2</td>
      <td class="gt_row gt_left">low</td>
      <td class="gt_row gt_left">USA</td>
      <td class="gt_row gt_right">3.40</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Mountain Special</td>
      <td class="gt_row gt_left">Pale Ale</td>
      <td class="gt_row gt_right">4.1</td>
      <td class="gt_row gt_left">low</td>
      <td class="gt_row gt_left">USA</td>
      <td class="gt_row gt_right">2.70</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Lagartos</td>
      <td class="gt_row gt_left">Lager</td>
      <td class="gt_row gt_right">5.1</td>
      <td class="gt_row gt_left">mid</td>
      <td class="gt_row gt_left">Mexico</td>
      <td class="gt_row gt_right">4.10</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Jealous Hobo</td>
      <td class="gt_row gt_left">Porter</td>
      <td class="gt_row gt_right">6.5</td>
      <td class="gt_row gt_left">mid</td>
      <td class="gt_row gt_left">USA</td>
      <td class="gt_row gt_right">3.36</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Strasse</td>
      <td class="gt_row gt_left">Stout</td>
      <td class="gt_row gt_right">8.3</td>
      <td class="gt_row gt_left">high</td>
      <td class="gt_row gt_left">Germany</td>
      <td class="gt_row gt_right">4.89</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Arbre</td>
      <td class="gt_row gt_left">Pale Ale</td>
      <td class="gt_row gt_right">3.4</td>
      <td class="gt_row gt_left">low</td>
      <td class="gt_row gt_left">Belgium</td>
      <td class="gt_row gt_right">4.01</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">K1997</td>
      <td class="gt_row gt_left">Lager</td>
      <td class="gt_row gt_right">4.0</td>
      <td class="gt_row gt_left">high</td>
      <td class="gt_row gt_left">Japan</td>
      <td class="gt_row gt_right">3.88</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Lagartos Cero</td>
      <td class="gt_row gt_left">Lager</td>
      <td class="gt_row gt_right">0.0</td>
      <td class="gt_row gt_left">mid</td>
      <td class="gt_row gt_left">Mexico</td>
      <td class="gt_row gt_right">2.00</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Airball</td>
      <td class="gt_row gt_left">Irish Ale</td>
      <td class="gt_row gt_right">6.0</td>
      <td class="gt_row gt_left">high</td>
      <td class="gt_row gt_left">USA</td>
      <td class="gt_row gt_right">3.64</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Clean Tackle</td>
      <td class="gt_row gt_left">Stout</td>
      <td class="gt_row gt_right">7.2</td>
      <td class="gt_row gt_left">mid</td>
      <td class="gt_row gt_left">England</td>
      <td class="gt_row gt_right">4.20</td>
    </tr>
  </tbody>
  
  
</table></div>
]

.panel[.panel-name[Data setup]

```r
beers &lt;- tibble::tribble(
               ~name,      ~style, ~alc_by_volume, ~price_range,  ~country, ~star_rating,
            "County",     "Lager",            4.2,        "low",     "USA",          3.4,
  "Mountain Special",  "Pale Ale",            4.1,        "low",     "USA",          2.7,
          "Lagartos",     "Lager",            5.1,        "mid",  "Mexico",          4.1,
      "Jealous Hobo",    "Porter",            6.5,        "mid",     "USA",         3.36,
           "Strasse",     "Stout",            8.3,       "high", "Germany",         4.89,
             "Arbre",  "Pale Ale",            3.4,        "low", "Belgium",         4.01,
             "K1997",     "Lager",              4,       "high",   "Japan",         3.88,
     "Lagartos Cero",     "Lager",              0,        "mid",  "Mexico",            2,
           "Airball", "Irish Ale",              6,       "high",     "USA",         3.64,
      "Clean Tackle",     "Stout",            7.2,        "mid", "England",          4.2
  )
```
]
]

---

.left-column[
.large.b[`select()`]
.large[Subset variables]

- by name  
- by position  
- by type  
]

.right-column[

```r
beers %&gt;% select(name, style, star_rating)
```

![select animation](images/select.gif)
]

---
.left-column[
.large.b[`mutate()`]
.large[Create and modify columns]

- create new  
- overwrite  
]

.right-column[

```r
beers %&gt;% select(name, style, star_rating) %&gt;% 
  mutate(stars = round(star_rating, digits = 0))
```

![mutate animation](images/mutate.gif)
]

---
.left-column[
.large.b[`filter()`]
.large[subset rows]

- keep rows that meet a condition
]

.right-column[

```r
beers %&gt;% select(name, style, star_rating) %&gt;% 
  mutate(stars = round(star_rating, digits = 0)) %&gt;% 
  filter(stars &gt; 3)
```

![filter animation](images/filter.gif)
]

---
class: my-turn
## My Turn

--

- Load the mammal sleep data bundled with `ggplot2`

--

- Select the "name" and "conservation" columns, as well as all numeric variables

--

- Create a new column that contains the values of _'awake'_ multiplied by the values in _'brainwt'_

--

- Filter the data to keep only rows with _'sleep_total'_ &gt; 4

--

&gt; I'll use pipes to chain the operations 

---

class: inverse
## Your Turn

--

- Load the mammal sleep data bundled with `ggplot2`

--

- Select "name" and "conservation" columns and those that include the string _'sleep'_ in their name

--

- Create a new column that contains the values of _'sleep_total'_ multiplied by 3

--

- Filter the data to remove domesticated mammals

--

&gt; Use pipes to chain the operations!

---

class: center, middle, dk-section-title
background-image:url("images/emmanuel-acua-43Tvb651fxE-unsplash.jpg")
background-size: cover
# Working with Columns with `across()`

---

## Operating on multiple columns

###.center.b.large.orange[`across()`]

--

`filter`, `mutate`, or `summarize` multiple columns

- By position, name, or type  

--

- Compound selections of columns  
(e.g. _numeric columns that contain "mass" in their name_)

---

## .b.orange[`across()`] arguments:

--

.large.b[`.cols`] Columns to transform
 
--
 
.large.b[`.fns`]  Function to apply to each of the selected columns  

--

&gt; Expects a function, so function name and arguments can be passed separately

--


```r
beers %&gt;% 
  mutate(across(c(alc_by_volume, star_rating), round, digits = 3))
```

---

## Useful column selection helpers

.ba.ph4[
.b.orange[`everything()`] Match all variables
]
&lt;/br&gt;

---

### Useful column selection helpers (continued)

.ba.ph4[
.b.orange[`!`] Take the complement of a set of variables (negate a selection)
]
&lt;/br&gt;


---

### Useful column selection helpers (continued)


.ba.ph4.mt1.mb1[
.b.orange[`where()`] Selects variables for which a predicate function returns `TRUE`  
&gt; e.g. subset or transform all numeric variables, determined by `is.numeric()`]

---

### Useful column selection helpers (continued)

.ba.ph4[
.b.orange[`matches()`] Match variable names with a regular expression
&gt; e.g. drop variables with numbers in their name

]

---

### Useful column selection helpers (continued)

.ba.ph4[
.b.orange[`:`] Select a range of consecutive variables
]
&lt;br&gt;

---

### Useful column selection helpers (continued)

.ba.ph4[
.b.orange[`-`]   Exclude variables   
(return all elements except the one preceded by the subtraction operator)
]

---

`beers`

<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#xivmntayjd .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #f4f4f9;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xivmntayjd .gt_heading {
  background-color: #f4f4f9;
  text-align: center;
  border-bottom-color: #f4f4f9;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xivmntayjd .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #f4f4f9;
  border-bottom-width: 0;
}

#xivmntayjd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #f4f4f9;
  border-top-width: 0;
}

#xivmntayjd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xivmntayjd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xivmntayjd .gt_col_heading {
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xivmntayjd .gt_column_spanner_outer {
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xivmntayjd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xivmntayjd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xivmntayjd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xivmntayjd .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#xivmntayjd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xivmntayjd .gt_from_md > :first-child {
  margin-top: 0;
}

#xivmntayjd .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xivmntayjd .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xivmntayjd .gt_stub {
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#xivmntayjd .gt_summary_row {
  color: #333333;
  background-color: #f4f4f9;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xivmntayjd .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#xivmntayjd .gt_grand_summary_row {
  color: #333333;
  background-color: #f4f4f9;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xivmntayjd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xivmntayjd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xivmntayjd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xivmntayjd .gt_footnotes {
  color: #333333;
  background-color: #f4f4f9;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xivmntayjd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#xivmntayjd .gt_sourcenotes {
  color: #333333;
  background-color: #f4f4f9;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xivmntayjd .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#xivmntayjd .gt_left {
  text-align: left;
}

#xivmntayjd .gt_center {
  text-align: center;
}

#xivmntayjd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xivmntayjd .gt_font_normal {
  font-weight: normal;
}

#xivmntayjd .gt_font_bold {
  font-weight: bold;
}

#xivmntayjd .gt_font_italic {
  font-style: italic;
}

#xivmntayjd .gt_super {
  font-size: 65%;
}

#xivmntayjd .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="xivmntayjd" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">name</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">style</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">alc_by_volume</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">price_range</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">country</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">star_rating</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">County</td>
      <td class="gt_row gt_left">Lager</td>
      <td class="gt_row gt_right">4.2</td>
      <td class="gt_row gt_left">low</td>
      <td class="gt_row gt_left">USA</td>
      <td class="gt_row gt_right">3.40</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Mountain Special</td>
      <td class="gt_row gt_left">Pale Ale</td>
      <td class="gt_row gt_right">4.1</td>
      <td class="gt_row gt_left">low</td>
      <td class="gt_row gt_left">USA</td>
      <td class="gt_row gt_right">2.70</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Lagartos</td>
      <td class="gt_row gt_left">Lager</td>
      <td class="gt_row gt_right">5.1</td>
      <td class="gt_row gt_left">mid</td>
      <td class="gt_row gt_left">Mexico</td>
      <td class="gt_row gt_right">4.10</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Jealous Hobo</td>
      <td class="gt_row gt_left">Porter</td>
      <td class="gt_row gt_right">6.5</td>
      <td class="gt_row gt_left">mid</td>
      <td class="gt_row gt_left">USA</td>
      <td class="gt_row gt_right">3.36</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Strasse</td>
      <td class="gt_row gt_left">Stout</td>
      <td class="gt_row gt_right">8.3</td>
      <td class="gt_row gt_left">high</td>
      <td class="gt_row gt_left">Germany</td>
      <td class="gt_row gt_right">4.89</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Arbre</td>
      <td class="gt_row gt_left">Pale Ale</td>
      <td class="gt_row gt_right">3.4</td>
      <td class="gt_row gt_left">low</td>
      <td class="gt_row gt_left">Belgium</td>
      <td class="gt_row gt_right">4.01</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">K1997</td>
      <td class="gt_row gt_left">Lager</td>
      <td class="gt_row gt_right">4.0</td>
      <td class="gt_row gt_left">high</td>
      <td class="gt_row gt_left">Japan</td>
      <td class="gt_row gt_right">3.88</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Lagartos Cero</td>
      <td class="gt_row gt_left">Lager</td>
      <td class="gt_row gt_right">0.0</td>
      <td class="gt_row gt_left">mid</td>
      <td class="gt_row gt_left">Mexico</td>
      <td class="gt_row gt_right">2.00</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Airball</td>
      <td class="gt_row gt_left">Irish Ale</td>
      <td class="gt_row gt_right">6.0</td>
      <td class="gt_row gt_left">high</td>
      <td class="gt_row gt_left">USA</td>
      <td class="gt_row gt_right">3.64</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Clean Tackle</td>
      <td class="gt_row gt_left">Stout</td>
      <td class="gt_row gt_right">7.2</td>
      <td class="gt_row gt_left">mid</td>
      <td class="gt_row gt_left">England</td>
      <td class="gt_row gt_right">4.20</td>
    </tr>
  </tbody>
  
  
</table></div>

---

### Square root (.orange.b[`sqrt()`]) of `alc_by_volume` and `star_rating`


```r
beers %&gt;% 
  mutate(across(c(alc_by_volume,star_rating), sqrt))
```

```
## # A tibble: 10 x 6
##    name             style     alc_by_volume price_range country star_rating
##    &lt;chr&gt;            &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;         &lt;dbl&gt;
##  1 County           Lager              2.05 low         USA            1.84
##  2 Mountain Special Pale Ale           2.02 low         USA            1.64
##  3 Lagartos         Lager              2.26 mid         Mexico         2.02
##  4 Jealous Hobo     Porter             2.55 mid         USA            1.83
##  5 Strasse          Stout              2.88 high        Germany        2.21
##  6 Arbre            Pale Ale           1.84 low         Belgium        2.00
##  7 K1997            Lager              2    high        Japan          1.97
##  8 Lagartos Cero    Lager              0    mid         Mexico         1.41
##  9 Airball          Irish Ale          2.45 high        USA            1.91
## 10 Clean Tackle     Stout              2.68 mid         England        2.05
```

---

### Square root (.orange.b[`sqrt()`]) of all numeric variables


```r
beers %&gt;% 
  mutate(across(where(is.numeric), sqrt))
```

```
## # A tibble: 10 x 6
##    name             style     alc_by_volume price_range country star_rating
##    &lt;chr&gt;            &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;         &lt;dbl&gt;
##  1 County           Lager              2.05 low         USA            1.84
##  2 Mountain Special Pale Ale           2.02 low         USA            1.64
##  3 Lagartos         Lager              2.26 mid         Mexico         2.02
##  4 Jealous Hobo     Porter             2.55 mid         USA            1.83
##  5 Strasse          Stout              2.88 high        Germany        2.21
##  6 Arbre            Pale Ale           1.84 low         Belgium        2.00
##  7 K1997            Lager              2    high        Japan          1.97
##  8 Lagartos Cero    Lager              0    mid         Mexico         1.41
##  9 Airball          Irish Ale          2.45 high        USA            1.91
## 10 Clean Tackle     Stout              2.68 mid         England        2.05
```

---

class: my-turn
## My Turn

--

- Load the _midwest_ data bundled with `ggplot2`

--

- Keep only rows for Wisconsin (WI)

--

- Subset the 'county' column and all columns that match the string '_perc_' (hint: use a selection helper)

--

- log-transform all numeric variables

--

- Append the suffix "_check" to every value

---

class: inverse
## Your Turn

--

- Load the _midwest_ data bundled with `ggplot2`

--

- Keep only rows for Ohio (OH)

--

- Subset the 'county' column and all columns that match the string '_pop_' (hint: use a selection helper)

--

- Square-root transform all numeric variables

---

class: center, middle, dk-section-title
background-image:url("images/1024px-Espacio_EscultÃ³rico.jpg")
background-size: cover
# Pivoting Data

---

.pull-left[
## Wide Data
Human-readable  
Easier entry  
Easier interactive editing
]
.pull.right[
## Long Data
Often meets Tidy Data principles  
Analysis-ready  
Maps well to plot axes and aesthetics ]


![widelong](images/widelong.png)

---
# Reshaping data with ðŸ“¦ .b.rrured[`tidyr`]

.large[wide to long: .b.orange[`pivot_longer()`]]  


```r
pivot_longer(data, cols, names_to, values_to)
```

--

.large[long to wide: .b.orange[`pivot_wider()`]] 


```r
pivot_longer(data, cols, names_from, values_from)
```

---


.panelset[
.panel[.panel-name[critters]
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#hlnyqtgqtt .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #f4f4f9;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hlnyqtgqtt .gt_heading {
  background-color: #f4f4f9;
  text-align: center;
  border-bottom-color: #f4f4f9;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hlnyqtgqtt .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #f4f4f9;
  border-bottom-width: 0;
}

#hlnyqtgqtt .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #f4f4f9;
  border-top-width: 0;
}

#hlnyqtgqtt .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hlnyqtgqtt .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hlnyqtgqtt .gt_col_heading {
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hlnyqtgqtt .gt_column_spanner_outer {
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hlnyqtgqtt .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hlnyqtgqtt .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hlnyqtgqtt .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hlnyqtgqtt .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#hlnyqtgqtt .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hlnyqtgqtt .gt_from_md > :first-child {
  margin-top: 0;
}

#hlnyqtgqtt .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hlnyqtgqtt .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hlnyqtgqtt .gt_stub {
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#hlnyqtgqtt .gt_summary_row {
  color: #333333;
  background-color: #f4f4f9;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hlnyqtgqtt .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#hlnyqtgqtt .gt_grand_summary_row {
  color: #333333;
  background-color: #f4f4f9;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hlnyqtgqtt .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hlnyqtgqtt .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hlnyqtgqtt .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hlnyqtgqtt .gt_footnotes {
  color: #333333;
  background-color: #f4f4f9;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hlnyqtgqtt .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#hlnyqtgqtt .gt_sourcenotes {
  color: #333333;
  background-color: #f4f4f9;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hlnyqtgqtt .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#hlnyqtgqtt .gt_left {
  text-align: left;
}

#hlnyqtgqtt .gt_center {
  text-align: center;
}

#hlnyqtgqtt .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hlnyqtgqtt .gt_font_normal {
  font-weight: normal;
}

#hlnyqtgqtt .gt_font_bold {
  font-weight: bold;
}

#hlnyqtgqtt .gt_font_italic {
  font-style: italic;
}

#hlnyqtgqtt .gt_super {
  font-size: 65%;
}

#hlnyqtgqtt .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="hlnyqtgqtt" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Habitat</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">County</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Frogs</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Crayfish</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Owls</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">Marsh</td>
      <td class="gt_row gt_left">Clarkville</td>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">4</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Urban</td>
      <td class="gt_row gt_left">Smith</td>
      <td class="gt_row gt_center">0</td>
      <td class="gt_row gt_center">0</td>
      <td class="gt_row gt_center">2</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Wetland</td>
      <td class="gt_row gt_left">Wilson</td>
      <td class="gt_row gt_center">9</td>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">1</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Forest</td>
      <td class="gt_row gt_left">Smith</td>
      <td class="gt_row gt_center">4</td>
      <td class="gt_row gt_center">0</td>
      <td class="gt_row gt_center">7</td>
    </tr>
  </tbody>
  
  
</table></div>
]

.panel[.panel-name[Data setup]

```r
critters &lt;- 
tibble::tribble(
   ~Habitat,      ~County, ~Frogs, ~Crayfish, ~Owls,
    "Marsh", "Clarkville",     7L,        5L,    4L,
    "Urban",      "Smith",     0L,        0L,    2L,
  "Wetland",     "Wilson",     9L,        2L,    1L,
   "Forest",      "Smith",     4L,        0L,    7L
  )
```
]
]

--

&lt;/br&gt;
Variables:
- Habitat
- County
- Critter Type
- Individuals Encountered

---
# Wide to long


```r
critters_long &lt;- critters %&gt;%
  pivot_longer(
    cols = c(Frogs, Crayfish, Owls),
    names_to = "critter_type",
    values_to = "individuals_encountered"
  )
```




--

.b[`cols`] Which columns have data in their names  

--

**`names_to`** Name for the new column to be created from `cols`  

--

**`values_to`** Name of the column to be created from the contents of the cells in **`cols`**  

---

```r
critters %&gt;%
  pivot_longer(cols = c(Frogs, Crayfish, Owls), 
               names_to = "critter_type", 
               values_to = "individuals_encountered")
```

```
## # A tibble: 12 x 4
##    Habitat County     critter_type individuals_encountered
##    &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;                          &lt;int&gt;
##  1 Marsh   Clarkville Frogs                              7
##  2 Marsh   Clarkville Crayfish                           5
##  3 Marsh   Clarkville Owls                               4
##  4 Urban   Smith      Frogs                              0
##  5 Urban   Smith      Crayfish                           0
##  6 Urban   Smith      Owls                               2
##  7 Wetland Wilson     Frogs                              9
##  8 Wetland Wilson     Crayfish                           2
##  9 Wetland Wilson     Owls                               1
## 10 Forest  Smith      Frogs                              4
## 11 Forest  Smith      Crayfish                           0
## 12 Forest  Smith      Owls                               7
```

---

# Long to wide


```r
critters_long %&gt;% 
  pivot_wider(names_from = critter_type, 
              values_from = individuals_encountered)
```

--

.b[`names_from`] Which columns' values will be used for new .b[column names]

--

.b[`values_from`] Which column has the .b[cell values] for the new output columns

---


```r
critters_long %&gt;%
  pivot_wider(names_from = critter_type, 
              values_from = individuals_encountered)
```

```
## # A tibble: 4 x 5
##   Habitat County     Frogs Crayfish  Owls
##   &lt;chr&gt;   &lt;chr&gt;      &lt;int&gt;    &lt;int&gt; &lt;int&gt;
## 1 Marsh   Clarkville     7        5     4
## 2 Urban   Smith          0        0     2
## 3 Wetland Wilson         9        2     1
## 4 Forest  Smith          4        0     7
```

---

class: center

![](images/pivoting.gif)

---

class: my-turn
# My Turn

--

- .large[Load the dog ranks data ("dogranks_mine.csv")]  

--

- .large[Pivot the data (wide to long and back to wide)]

---

class: inverse
# Your Turn

--

- .large[Load the dog ranks data ("dogranks_your.csv")]  

--

- .large[Pivot the data (wide to long and back to wide)]

---

class: center, middle, dk-section-title
background-image:url("images/drew-dau-dXxsLrlg9qY-unsplash.jpg")
background-size: cover
# Coalescing Columns

---

## .b.orange[coalesce()] from ðŸ“¦ .b.rrured[`dplyr`]  

--

- Find and return the first non-NA value at each position for a set of vectors

--

- Returns a single vector with the non-NA values that appear first 

---

## .b.orange[coalesce()] from ðŸ“¦ .b.rrured[`dplyr`]  


```r
x &lt;- c(1, 2, NA, NA, 5)
y &lt;- c(NA, NA, 3, 4, 5)
z &lt;- c(1, 4, 3, 5, 3)
```

--


```r
coalesce(x, y, z)
```

```
## [1] 1 2 3 4 5
```

---

## .b.orange[coalesce()] from ðŸ“¦ .b.rrured[`dplyr`]  


```r
x &lt;- c(1, 2, NA, NA, 5)
y &lt;- c(NA, NA, 3, 4, 5)
z &lt;- c(1, 4, 3, 5, 3)
```

--


```r
coalesce(z,x,y)
```

```
## [1] 1 4 3 5 3
```

---



.panelset[
.panel[.panel-name[sensors]
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#htwtctxxxd .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #f4f4f9;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#htwtctxxxd .gt_heading {
  background-color: #f4f4f9;
  text-align: center;
  border-bottom-color: #f4f4f9;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#htwtctxxxd .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #f4f4f9;
  border-bottom-width: 0;
}

#htwtctxxxd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #f4f4f9;
  border-top-width: 0;
}

#htwtctxxxd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#htwtctxxxd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#htwtctxxxd .gt_col_heading {
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#htwtctxxxd .gt_column_spanner_outer {
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#htwtctxxxd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#htwtctxxxd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#htwtctxxxd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#htwtctxxxd .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#htwtctxxxd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#htwtctxxxd .gt_from_md > :first-child {
  margin-top: 0;
}

#htwtctxxxd .gt_from_md > :last-child {
  margin-bottom: 0;
}

#htwtctxxxd .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#htwtctxxxd .gt_stub {
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#htwtctxxxd .gt_summary_row {
  color: #333333;
  background-color: #f4f4f9;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#htwtctxxxd .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#htwtctxxxd .gt_grand_summary_row {
  color: #333333;
  background-color: #f4f4f9;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#htwtctxxxd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#htwtctxxxd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#htwtctxxxd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#htwtctxxxd .gt_footnotes {
  color: #333333;
  background-color: #f4f4f9;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#htwtctxxxd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#htwtctxxxd .gt_sourcenotes {
  color: #333333;
  background-color: #f4f4f9;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#htwtctxxxd .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#htwtctxxxd .gt_left {
  text-align: left;
}

#htwtctxxxd .gt_center {
  text-align: center;
}

#htwtctxxxd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#htwtctxxxd .gt_font_normal {
  font-weight: normal;
}

#htwtctxxxd .gt_font_bold {
  font-weight: bold;
}

#htwtctxxxd .gt_font_italic {
  font-style: italic;
}

#htwtctxxxd .gt_super {
  font-size: 65%;
}

#htwtctxxxd .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="htwtctxxxd" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Sample</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Main.Sensor</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Backup.Sensor</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Manual.Reading</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">A</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_right">12.1</td>
      <td class="gt_row gt_right">12.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B</td>
      <td class="gt_row gt_center">12</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">11.9</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C</td>
      <td class="gt_row gt_center">16</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">D</td>
      <td class="gt_row gt_center">3</td>
      <td class="gt_row gt_right">9.5</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">E</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_right">13.0</td>
      <td class="gt_row gt_right">12.0</td>
    </tr>
  </tbody>
  
  
</table></div>
]

.panel[.panel-name[Data setup]

```r
sensors &lt;- 
tibble::tribble(
  ~Sample, ~Main.Sensor, ~Backup.Sensor, ~Manual.Reading,
      "A",           NA,           12.1,              12,
      "B",          12L,             NA,            11.9,
      "C",          16L,             NA,              NA,
      "D",           3L,            9.5,              NA,
      "E",           NA,             13,              12
  )
```
]
]

---

&lt;/br&gt;


```r
sensors %&gt;% 
  mutate(Final.Reading=coalesce(Main.Sensor, Backup.Sensor, Manual.Reading))
```

```
## # A tibble: 5 x 5
##   Sample Main.Sensor Backup.Sensor Manual.Reading Final.Reading
##   &lt;chr&gt;        &lt;int&gt;         &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;
## 1 A               NA          12.1           12            12.1
## 2 B               12          NA             11.9          12  
## 3 C               16          NA             NA            16  
## 4 D                3           9.5           NA             3  
## 5 E               NA          13             12            13
```

---
class: center
![](images/coalesce.gif)

---

class: center, middle, dk-section-title
background-image:url("images/sen-sathyamony-4RkmVyBMO5Q-unsplash.jpg")
background-size: cover
# Filling Adjacent Values

---

## .b.orange[fill()] from ðŸ“¦ .b.rrured[`tidyr`]  


.fl.w-40[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ntshomsfde .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #f4f4f9;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ntshomsfde .gt_heading {
  background-color: #f4f4f9;
  text-align: center;
  border-bottom-color: #f4f4f9;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ntshomsfde .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #f4f4f9;
  border-bottom-width: 0;
}

#ntshomsfde .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #f4f4f9;
  border-top-width: 0;
}

#ntshomsfde .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ntshomsfde .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ntshomsfde .gt_col_heading {
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ntshomsfde .gt_column_spanner_outer {
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ntshomsfde .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ntshomsfde .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ntshomsfde .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ntshomsfde .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ntshomsfde .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ntshomsfde .gt_from_md > :first-child {
  margin-top: 0;
}

#ntshomsfde .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ntshomsfde .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ntshomsfde .gt_stub {
  color: #333333;
  background-color: #f4f4f9;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#ntshomsfde .gt_summary_row {
  color: #333333;
  background-color: #f4f4f9;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ntshomsfde .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#ntshomsfde .gt_grand_summary_row {
  color: #333333;
  background-color: #f4f4f9;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ntshomsfde .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ntshomsfde .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ntshomsfde .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ntshomsfde .gt_footnotes {
  color: #333333;
  background-color: #f4f4f9;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ntshomsfde .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#ntshomsfde .gt_sourcenotes {
  color: #333333;
  background-color: #f4f4f9;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ntshomsfde .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#ntshomsfde .gt_left {
  text-align: left;
}

#ntshomsfde .gt_center {
  text-align: center;
}

#ntshomsfde .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ntshomsfde .gt_font_normal {
  font-weight: normal;
}

#ntshomsfde .gt_font_bold {
  font-weight: bold;
}

#ntshomsfde .gt_font_italic {
  font-style: italic;
}

#ntshomsfde .gt_super {
  font-size: 65%;
}

#ntshomsfde .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="ntshomsfde" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">animal</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">population</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">Bird</td>
      <td class="gt_row gt_right">21</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_right">5</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_right">7</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_right">23</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_right">74</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Frog</td>
      <td class="gt_row gt_right">23</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_right">65</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_right">12</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_right">5</td>
    </tr>
  </tbody>
  
  
</table></div>
]

&lt;/br&gt;
`animal_populations`

--

.large[- Fill missing values in a column (top to bottom by default)]   

--

.large[- Contiguous/adjacent values assumed to be the same]   

--

.large[- Values only appear when they change along a column]

---

## fill()

.pull-left[

```r
animal_populations
```

```
## # A tibble: 9 x 2
##   animal population
##   &lt;chr&gt;       &lt;dbl&gt;
## 1 Bird           21
## 2 &lt;NA&gt;            5
## 3 &lt;NA&gt;            7
## 4 &lt;NA&gt;           23
## 5 &lt;NA&gt;           74
## 6 Frog           23
## 7 &lt;NA&gt;           65
## 8 &lt;NA&gt;           12
## 9 &lt;NA&gt;            5
```
]

.pull-right[

```r
animal_populations %&gt;% 
  fill(animal)
```

```
## # A tibble: 9 x 2
##   animal population
##   &lt;chr&gt;       &lt;dbl&gt;
## 1 Bird           21
## 2 Bird            5
## 3 Bird            7
## 4 Bird           23
## 5 Bird           74
## 6 Frog           23
## 7 Frog           65
## 8 Frog           12
## 9 Frog            5
```
]

---
class: my-turn
# My Turn

--

.large[- Load the fish landings data 'fish-landings.csv']

--

.large[- Fill the 'Fish' and 'Lake' columns]

--

.large[- Create a new column, coalescing the three numeric variables]

---

class: inverse
# Your Turn

--

.large[- Load the fish landings data 'fish-landings.csv']

--

.large[- Fill the 'Fish' and 'Lake' columns]

--

.large[- Reorder the numeric variables ('Comission reported total' first) and create a new column, coalescing the three numeric variables]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
